{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/assets/main.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\n// var $ = require('jquery');\n\n// var fullpage = require('fullpage.js');\n// var Barba = require('barba.js');\n\n// variables\nvar\n    $isAnimatedSecond = $('.second .is-animated'),\n    $isAnimatedThird = $('.third .is-animated'),\n    $isAnimatedFourth = $('.fourth .is-animated'),\n    $isAnimatedFifth = $('.fifth .is-animated');\n    $isAnimatedSixth = $('.sixth .is-animated');\n\n\n\n\n\n$('#fullpage').fullpage({\n    licenseKey: 'xxxxxxxx-xxxxxxxx-xxxxxxxx-xxxxxxxx',\n    verticalCentered: true,\n    lockAnchors: true,\n    anchors: ['1', '2', '3', '4', '5', 'last'],\n    navigation: true,\n    navigationTooltips: ['MasterDynamix',  'What we do', 'Your success', 'Slider', 'Our expertise', 'Reach us'],\n    showActiveTooltip: false,\n    menu: '#menu',\n    // sectionsColor: ['#fff',  '#fff', '#fff', '#fff', '#fff'],\n    scrollOverflow: true,\n    afterRender: function(){\n\n        particlesJS.load('particles-js', 'assets/particles.json', function() {\n            console.log('callback - particles.js config loaded');\n        });\n        \n        //slick\n        jQuery('.slider').slick({\n            dots: true,\n            infinite: true,\n            speed: 650,\n            autoplay: true,\n            prevArrow: '<span class=\"slick-prev\"><i class=\"fas fa-chevron-left fa-2x\"></i></span>',\n            nextArrow: '<span class=\"slick-next\"><i class=\"fas fa-chevron-right fa-2x\"></i></span>',\n            autoplaySpeed: 4000,\n            responsive: [\n                {\n                  breakpoint: 767,\n                  settings: {\n                    arrows: false\n                  }\n                }\n            ]\n        });\n\n    },\n    afterLoad: function(origin, destination){\n        //using destination\n        console.log(destination.anchor);\n        if(destination.anchor == 'last'){\n            $('*[data-open=\"popup-trigger\"]').addClass('not-active')\n\n        } else {\n            $('*[data-open=\"popup-trigger\"]').removeClass('not-active')\n        }\n        // console.log(fullpage_api.getActiveSection());\n    },\n    onLeave: function(origin, nextIndex) {\n        \n        // first animation\n        if( origin.index == 0 && nextIndex.index == 1 ) {\n            $isAnimatedSecond.addClass('animated');\n            $isAnimatedSecond.eq(0).addClass('animated fadeIn').css('animation-delay', '0.2s');\n            $isAnimatedSecond.eq(1).addClass('animated fadeIn').css('animation-delay', '0.4s');\n            $isAnimatedSecond.eq(2).addClass('animated fadeIn').css('animation-delay', '0.8s');\n        }\n        // second animation\n        else if( origin.index == 1 && nextIndex.index == 2 ) {\n            $isAnimatedThird.addClass('animated');\n            $isAnimatedThird.eq(0).addClass('fadeInLeftBig').css('animation-delay', '.2s');\n            $isAnimatedThird.eq(1).addClass('fadeInUpBig').css('animation-delay', '.4s');\n            // $isAnimatedSecondSingle.addClass('animated rollIn').css('animation-delay', '1.7s');\n        }\n\n        // third animation\n        else if( ( origin.index == 1 || origin.index == 2 ) && nextIndex.index == 3 ) {\n            $isAnimatedFourth.eq(0).addClass('animated fadeIn').css('animation-delay', '0.2s');\n            $isAnimatedFourth.eq(1).addClass('animated fadeIn').css('animation-delay', '0.7s');\n        }\n\n\n        // fourth animation\n        else if( ( origin.index == 1 || origin.index == 2 || origin.index == 3 ) && nextIndex.index == 4 ) {\n            $isAnimatedFifth.eq(0).addClass('animated zoomIn').css('animation-delay', '.1s');\n            $isAnimatedFifth.eq(1).addClass('animated zoomIn').css('animation-delay', '.5s');\n\n        }\n        \n        else if( ( origin.index == 1 || origin.index == 2 || origin.index == 3 || origin.index == 4 ) && nextIndex.index == 5 ) {\n            $isAnimatedSixth.eq(0).addClass('animated zoomIn').css('animation-delay', '.3s');\n        }\n    }\n});\n\n$('#arrowAnim').click(function(){\n    $.fn.fullpage.moveSectionDown();\n});\n\n$(document).ready(function() {\n    $('body').fadeTo( \"fast\", 1 );\n    if($('body').hasClass(\"tingle-enabled\")){\n        fullpage_api.setAllowScrolling(false);\n    } else {\n        fullpage_api.setAllowScrolling(true);\n    }\n});\n\nif (window.location.href.indexOf(\"partners\") > -1) {\n    $('#fullpage-projects').fullpage({\n        licenseKey: 'xxxxxxxx-xxxxxxxx-xxxxxxxx-xxxxxxxx',\n        verticalCentered: false,\n        lockAnchors: true,\n        anchors: ['FreeHomeRisk', 'HazardHub', 'UnderNDA', 'TrueReviewCasino'],\n        navigation: true,\n        navigationTooltips: ['FreeHomeRisk', 'HazardHub', 'UnderNDA', 'TrueReviewCasino'],\n        showActiveTooltip: true,\n        menu: '#menu',\n        sectionsColor: ['#fff',  '#f7f7f7', '#fff', '#f7f7f7'],\n        //disabled in mobile\n        responsiveWidth: 767,\n        afterResponsive: function(isResponsive){},\n        afterRender: function(){\n            var modalBigContent = new tingle.modal({\n                onOpen: function() {\n                    fullpage_api.setAllowScrolling(false);\n                },\n                onClose: function() {\n                    fullpage_api.setAllowScrolling(true);\n                }\n            });\n            var btn1 = document.querySelector('.js-tingle-modal-1');\n            if(btn1){\n                btn1.addEventListener('click', function(){\n                    modalBigContent.open();\n                });\n            }\n            \n            modalBigContent.setContent(document.querySelector('.tingle-demo-big-1').innerHTML);\n\n            var modalBigContent2 = new tingle.modal({\n                onOpen: function() {\n                    fullpage_api.setAllowScrolling(false);\n                },\n                onClose: function() {\n                    fullpage_api.setAllowScrolling(true);\n                }\n            });\n            var btn1 = document.querySelector('.js-tingle-modal-2');\n            if(btn1){\n                btn1.addEventListener('click', function(){\n                    modalBigContent2.open();\n                });\n            }\n            \n            modalBigContent2.setContent(document.querySelector('.tingle-demo-big-2').innerHTML);\n\n            // var i;\n            // projects = 5;\n            // for (i = 1; i < projects; i++) { \n            //     var btn = 'btn'+i\n            //     btn = document.querySelector('.js-tingle-modal-'+i);\n            //     if(btn){\n            //         btn.addEventListener('click', function(){\n            //             modalBigContent.open();\n            //         });\n            //     }\n            //     if(document.querySelector('.tingle-demo-big-'+i) != null) {\n            //         modalBigContent.setContent(document.querySelector('.tingle-demo-big-'+i).innerHTML);\n            //     }\n                    \n            //     console.log(document.querySelector('.tingle-demo-big-'+i).innerHTML);\n            // }\n            \n        }\n    });\n}\n\n\n\n// Barba.Dispatcher.on('newPageReady', function(current, prev, container) {\n//     if ( $( 'html' ).hasClass( 'fp-enabled' ) ) {\n//         $.fn.fullpage.destroy('all');\n//     }\n//\n//\n// });\n//\n// $(document).ready(function() {\n//     Barba.Pjax.start();\n//     var FadeTransition = Barba.BaseTransition.extend({\n//         start: function() {\n//             /**\n//              * This function is automatically called as soon the Transition starts\n//              * this.newContainerLoading is a Promise for the loading of the new container\n//              * (Barba.js also comes with an handy Promise polyfill!)\n//              */\n//\n//             // As soon the loading is finished and the old page is faded out, let's fade the new page\n//             Promise\n//                 .all([this.newContainerLoading, this.fadeOut()])\n//                 .then(this.fadeIn.bind(this));\n//         },\n//\n//         fadeOut: function() {\n//             /**\n//              * this.oldContainer is the HTMLElement of the old Container\n//              */\n//\n//             return $(this.oldContainer).animate({ opacity: 0 }).promise();\n//         },\n//\n//         fadeIn: function() {\n//             /**\n//              * this.newContainer is the HTMLElement of the new Container\n//              * At this stage newContainer is on the DOM (inside our #barba-container and with visibility: hidden)\n//              * Please note, newContainer is available just after newContainerLoading is resolved!\n//              */\n//\n//             var _this = this;\n//             var $el = $(this.newContainer);\n//\n//             $(this.oldContainer).hide();\n//\n//             $el.css({visibility : 'visible',\n//                 opacity : 0\n//             });\n//\n//             $el.animate({ opacity: 1 }, 400, function() {\n//                 /**\n//                  * Do not forget to call .done() as soon your transition is finished!\n//                  * .done() will automatically remove from the DOM the old Container\n//                  */\n//\n//                 _this.done();\n//             });\n//         }\n//     });\n//\n//     /**\n//      * Next step, you have to tell Barba to use the new Transition\n//      */\n//\n//     Barba.Pjax.getTransition = function() {\n//         /**\n//          * Here you can use your own logic!\n//          * For example you can use different Transition based on the current page or link...\n//          */\n//\n//         return FadeTransition;\n//     };\n//\n// });\n//\n//\n\nfunction validEmail(email) { // see:\n    var re = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i;\n    return re.test(email);\n}\n\nfunction validateHuman(honeypot) {\n    if (honeypot) {  //if hidden form filled up\n        console.log(\"Robot Detected!\");\n        return true;\n    } else {\n        console.log(\"Welcome Human!\");\n    }\n}\n\n// get all data in form and return object\nfunction getFormData() {\n    var form = document.getElementById(\"gform\");\n    var elements = form.elements; // all form elements\n    var fields = Object.keys(elements).filter(function(k) {\n        // the filtering logic is simple, only keep fields that are not the honeypot\n        return (elements[k].name !== \"honeypot\");\n    }).map(function(k) {\n        if(elements[k].name !== undefined) {\n            return elements[k].name;\n            // special case for Edge's html collection\n        }else if(elements[k].length > 0){\n            return elements[k].item(0).name;\n        }\n    }).filter(function(item, pos, self) {\n        return self.indexOf(item) == pos && item;\n    });\n    var data = {};\n    fields.forEach(function(k){\n        data[k] = elements[k].value;\n        var str = \"\"; // declare empty string outside of loop to allow\n                      // it to be appended to for each item in the loop\n        if(elements[k].type === \"checkbox\"){ // special case for Edge's html collection\n            str = str + elements[k].checked + \", \"; // take the string and append\n                                                    // the current checked value to\n                                                    // the end of it, along with\n                                                    // a comma and a space\n            data[k] = str.slice(0, -2); // remove the last comma and space\n                                        // from the  string to make the output\n                                        // prettier in the spreadsheet\n        }else if(elements[k].length){\n            for(var i = 0; i < elements[k].length; i++){\n                if(elements[k].item(i).checked){\n                    str = str + elements[k].item(i).value + \", \"; // same as above\n                    data[k] = str.slice(0, -2);\n                }\n            }\n        }\n    });\n\n    // add form-specific values into the data\n    data.formDataNameOrder = JSON.stringify(fields);\n    data.formGoogleSheetName = form.dataset.sheet || \"responses\"; // default sheet name\n    data.formGoogleSendEmail = form.dataset.email || \"\"; // no email by default\n\n    console.log(data);\n    return data;\n}\n\nfunction handleFormSubmit(event) {  // handles form submit withtout any jquery\n    event.preventDefault();           // we are submitting via xhr below\n    var data = getFormData();         // get the values submitted in the form\n\n    /* OPTION: Remove this comment to enable SPAM prevention, see README.md\n     if (validateHuman(data.honeypot)) {  //if form is filled, form will not be submitted\n     return false;\n     }\n     */\n\n    if( data.email && !validEmail(data.email) ) {   // if email is not valid show error\n        var invalidEmail = document.getElementById(\"email-invalid\");\n        if (invalidEmail) {\n            invalidEmail.style.display = \"block\";\n            return false;\n        }\n    } else {\n        var url = event.target.action;  //\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', url);\n        // xhr.withCredentials = true;\n        xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n        xhr.onreadystatechange = function() {\n            console.log( xhr.status, xhr.statusText )\n            console.log(xhr.responseText);\n            document.getElementById(\"gform\").style.display = \"none\"; // hide form\n            var thankYouMessage = document.getElementById(\"thankyou_message\");\n            if (thankYouMessage) {\n                thankYouMessage.style.display = \"block\";\n            }\n            return;\n        };\n        // url encode form data for sending as post data\n        var encoded = Object.keys(data).map(function(k) {\n            return encodeURIComponent(k) + \"=\" + encodeURIComponent(data[k])\n        }).join('&')\n        xhr.send(encoded);\n    }\n}\nfunction loaded() {\n    console.log(\"Contact form submission handler loaded successfully.\");\n    // bind to the submit event of our form\n    var form = document.getElementById(\"gform\");\n    form.addEventListener(\"submit\", handleFormSubmit, false);\n};\ndocument.addEventListener(\"DOMContentLoaded\", loaded, false);\n\nif (window.location.href.indexOf(\"index\") > -1) {\n    // get all data in form and return object\n    function getFormData2() {\n        var form = document.getElementById(\"gform2\");\n        var elements = form.elements; // all form elements\n        var fields = Object.keys(elements).map(function(k) {\n            if(elements[k].name !== undefined) {\n                return elements[k].name;\n                // special case for Edge's html collection\n            }else if(elements[k].length > 0){\n                return elements[k].item(0).name;\n            }\n        }).filter(function(item, pos, self) {\n            return self.indexOf(item) == pos && item;\n        });\n        var data = {};\n        fields.forEach(function(k){\n            data[k] = elements[k].value;\n            var str = \"\"; // declare empty string outside of loop to allow\n                        // it to be appended to for each item in the loop\n            if(elements[k].type === \"checkbox\"){ // special case for Edge's html collection\n                str = str + elements[k].checked + \", \"; // take the string and append\n                                                        // the current checked value to\n                                                        // the end of it, along with\n                                                        // a comma and a space\n                data[k] = str.slice(0, -2); // remove the last comma and space\n                                            // from the  string to make the output\n                                            // prettier in the spreadsheet\n            }else if(elements[k].length){\n                for(var i = 0; i < elements[k].length; i++){\n                    if(elements[k].item(i).checked){\n                        str = str + elements[k].item(i).value + \", \"; // same as above\n                        data[k] = str.slice(0, -2);\n                    }\n                }\n            }\n        });\n\n        // add form-specific values into the data\n        data.formDataNameOrder = JSON.stringify(fields);\n        data.formGoogleSheetName = form.dataset.sheet || \"responses\"; // default sheet name\n        data.formGoogleSendEmail = form.dataset.email || \"\"; // no email by default\n\n        console.log(data);\n        return data;\n    }\n\n    function handleFormSubmit2(event) {  // handles form submit withtout any jquery\n        event.preventDefault();           // we are submitting via xhr below\n        var data = getFormData2();         // get the values submitted in the form\n\n        /* OPTION: Remove this comment to enable SPAM prevention, see README.md\n        if (validateHuman(data.honeypot)) {  //if form is filled, form will not be submitted\n        return false;\n        }\n        */\n\n        if( !validEmail(data.email) ) {   // if email is not valid show error\n            document.getElementById('email-invalid2').style.display = 'block';\n            return false;\n        } else {\n            var url = event.target.action;  //\n            var xhr = new XMLHttpRequest();\n            xhr.open('POST', url);\n            // xhr.withCredentials = true;\n            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n            xhr.onreadystatechange = function() {\n                console.log( xhr.status, xhr.statusText )\n                console.log(xhr.responseText);\n                document.getElementById('gform2').style.display = 'none'; // hide form\n                document.getElementById('thankyou_message2').style.display = 'block';\n                return;\n            };\n            // url encode form data for sending as post data\n            var encoded = Object.keys(data).map(function(k) {\n                return encodeURIComponent(k) + '=' + encodeURIComponent(data[k])\n            }).join('&')\n            xhr.send(encoded);\n        }\n    }\n    function loaded2() {\n        console.log('contact form submission handler loaded successfully');\n        // bind to the submit event of our form\n        var form = document.getElementById('gform2');\n        form.addEventListener(\"submit\", handleFormSubmit2, false);\n    };\n    document.addEventListener('DOMContentLoaded', loaded2, false);\n};"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXNzZXRzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJcbi8vIHZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG5cbi8vIHZhciBmdWxscGFnZSA9IHJlcXVpcmUoJ2Z1bGxwYWdlLmpzJyk7XG4vLyB2YXIgQmFyYmEgPSByZXF1aXJlKCdiYXJiYS5qcycpO1xuXG4vLyB2YXJpYWJsZXNcbnZhclxuICAgICRpc0FuaW1hdGVkU2Vjb25kID0gJCgnLnNlY29uZCAuaXMtYW5pbWF0ZWQnKSxcbiAgICAkaXNBbmltYXRlZFRoaXJkID0gJCgnLnRoaXJkIC5pcy1hbmltYXRlZCcpLFxuICAgICRpc0FuaW1hdGVkRm91cnRoID0gJCgnLmZvdXJ0aCAuaXMtYW5pbWF0ZWQnKSxcbiAgICAkaXNBbmltYXRlZEZpZnRoID0gJCgnLmZpZnRoIC5pcy1hbmltYXRlZCcpO1xuICAgICRpc0FuaW1hdGVkU2l4dGggPSAkKCcuc2l4dGggLmlzLWFuaW1hdGVkJyk7XG5cblxuXG5cblxuJCgnI2Z1bGxwYWdlJykuZnVsbHBhZ2Uoe1xuICAgIGxpY2Vuc2VLZXk6ICd4eHh4eHh4eC14eHh4eHh4eC14eHh4eHh4eC14eHh4eHh4eCcsXG4gICAgdmVydGljYWxDZW50ZXJlZDogdHJ1ZSxcbiAgICBsb2NrQW5jaG9yczogdHJ1ZSxcbiAgICBhbmNob3JzOiBbJzEnLCAnMicsICczJywgJzQnLCAnNScsICdsYXN0J10sXG4gICAgbmF2aWdhdGlvbjogdHJ1ZSxcbiAgICBuYXZpZ2F0aW9uVG9vbHRpcHM6IFsnTWFzdGVyRHluYW1peCcsICAnV2hhdCB3ZSBkbycsICdZb3VyIHN1Y2Nlc3MnLCAnU2xpZGVyJywgJ091ciBleHBlcnRpc2UnLCAnUmVhY2ggdXMnXSxcbiAgICBzaG93QWN0aXZlVG9vbHRpcDogZmFsc2UsXG4gICAgbWVudTogJyNtZW51JyxcbiAgICAvLyBzZWN0aW9uc0NvbG9yOiBbJyNmZmYnLCAgJyNmZmYnLCAnI2ZmZicsICcjZmZmJywgJyNmZmYnXSxcbiAgICBzY3JvbGxPdmVyZmxvdzogdHJ1ZSxcbiAgICBhZnRlclJlbmRlcjogZnVuY3Rpb24oKXtcblxuICAgICAgICBwYXJ0aWNsZXNKUy5sb2FkKCdwYXJ0aWNsZXMtanMnLCAnYXNzZXRzL3BhcnRpY2xlcy5qc29uJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2FsbGJhY2sgLSBwYXJ0aWNsZXMuanMgY29uZmlnIGxvYWRlZCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vc2xpY2tcbiAgICAgICAgalF1ZXJ5KCcuc2xpZGVyJykuc2xpY2soe1xuICAgICAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgICAgICAgIGluZmluaXRlOiB0cnVlLFxuICAgICAgICAgICAgc3BlZWQ6IDY1MCxcbiAgICAgICAgICAgIGF1dG9wbGF5OiB0cnVlLFxuICAgICAgICAgICAgcHJldkFycm93OiAnPHNwYW4gY2xhc3M9XCJzbGljay1wcmV2XCI+PGkgY2xhc3M9XCJmYXMgZmEtY2hldnJvbi1sZWZ0IGZhLTJ4XCI+PC9pPjwvc3Bhbj4nLFxuICAgICAgICAgICAgbmV4dEFycm93OiAnPHNwYW4gY2xhc3M9XCJzbGljay1uZXh0XCI+PGkgY2xhc3M9XCJmYXMgZmEtY2hldnJvbi1yaWdodCBmYS0yeFwiPjwvaT48L3NwYW4+JyxcbiAgICAgICAgICAgIGF1dG9wbGF5U3BlZWQ6IDQwMDAsXG4gICAgICAgICAgICByZXNwb25zaXZlOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY3LFxuICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dzOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfSk7XG5cbiAgICB9LFxuICAgIGFmdGVyTG9hZDogZnVuY3Rpb24ob3JpZ2luLCBkZXN0aW5hdGlvbil7XG4gICAgICAgIC8vdXNpbmcgZGVzdGluYXRpb25cbiAgICAgICAgY29uc29sZS5sb2coZGVzdGluYXRpb24uYW5jaG9yKTtcbiAgICAgICAgaWYoZGVzdGluYXRpb24uYW5jaG9yID09ICdsYXN0Jyl7XG4gICAgICAgICAgICAkKCcqW2RhdGEtb3Blbj1cInBvcHVwLXRyaWdnZXJcIl0nKS5hZGRDbGFzcygnbm90LWFjdGl2ZScpXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJypbZGF0YS1vcGVuPVwicG9wdXAtdHJpZ2dlclwiXScpLnJlbW92ZUNsYXNzKCdub3QtYWN0aXZlJylcbiAgICAgICAgfVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhmdWxscGFnZV9hcGkuZ2V0QWN0aXZlU2VjdGlvbigpKTtcbiAgICB9LFxuICAgIG9uTGVhdmU6IGZ1bmN0aW9uKG9yaWdpbiwgbmV4dEluZGV4KSB7XG4gICAgICAgIFxuICAgICAgICAvLyBmaXJzdCBhbmltYXRpb25cbiAgICAgICAgaWYoIG9yaWdpbi5pbmRleCA9PSAwICYmIG5leHRJbmRleC5pbmRleCA9PSAxICkge1xuICAgICAgICAgICAgJGlzQW5pbWF0ZWRTZWNvbmQuYWRkQ2xhc3MoJ2FuaW1hdGVkJyk7XG4gICAgICAgICAgICAkaXNBbmltYXRlZFNlY29uZC5lcSgwKS5hZGRDbGFzcygnYW5pbWF0ZWQgZmFkZUluJykuY3NzKCdhbmltYXRpb24tZGVsYXknLCAnMC4ycycpO1xuICAgICAgICAgICAgJGlzQW5pbWF0ZWRTZWNvbmQuZXEoMSkuYWRkQ2xhc3MoJ2FuaW1hdGVkIGZhZGVJbicpLmNzcygnYW5pbWF0aW9uLWRlbGF5JywgJzAuNHMnKTtcbiAgICAgICAgICAgICRpc0FuaW1hdGVkU2Vjb25kLmVxKDIpLmFkZENsYXNzKCdhbmltYXRlZCBmYWRlSW4nKS5jc3MoJ2FuaW1hdGlvbi1kZWxheScsICcwLjhzJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2Vjb25kIGFuaW1hdGlvblxuICAgICAgICBlbHNlIGlmKCBvcmlnaW4uaW5kZXggPT0gMSAmJiBuZXh0SW5kZXguaW5kZXggPT0gMiApIHtcbiAgICAgICAgICAgICRpc0FuaW1hdGVkVGhpcmQuYWRkQ2xhc3MoJ2FuaW1hdGVkJyk7XG4gICAgICAgICAgICAkaXNBbmltYXRlZFRoaXJkLmVxKDApLmFkZENsYXNzKCdmYWRlSW5MZWZ0QmlnJykuY3NzKCdhbmltYXRpb24tZGVsYXknLCAnLjJzJyk7XG4gICAgICAgICAgICAkaXNBbmltYXRlZFRoaXJkLmVxKDEpLmFkZENsYXNzKCdmYWRlSW5VcEJpZycpLmNzcygnYW5pbWF0aW9uLWRlbGF5JywgJy40cycpO1xuICAgICAgICAgICAgLy8gJGlzQW5pbWF0ZWRTZWNvbmRTaW5nbGUuYWRkQ2xhc3MoJ2FuaW1hdGVkIHJvbGxJbicpLmNzcygnYW5pbWF0aW9uLWRlbGF5JywgJzEuN3MnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoaXJkIGFuaW1hdGlvblxuICAgICAgICBlbHNlIGlmKCAoIG9yaWdpbi5pbmRleCA9PSAxIHx8IG9yaWdpbi5pbmRleCA9PSAyICkgJiYgbmV4dEluZGV4LmluZGV4ID09IDMgKSB7XG4gICAgICAgICAgICAkaXNBbmltYXRlZEZvdXJ0aC5lcSgwKS5hZGRDbGFzcygnYW5pbWF0ZWQgZmFkZUluJykuY3NzKCdhbmltYXRpb24tZGVsYXknLCAnMC4ycycpO1xuICAgICAgICAgICAgJGlzQW5pbWF0ZWRGb3VydGguZXEoMSkuYWRkQ2xhc3MoJ2FuaW1hdGVkIGZhZGVJbicpLmNzcygnYW5pbWF0aW9uLWRlbGF5JywgJzAuN3MnKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gZm91cnRoIGFuaW1hdGlvblxuICAgICAgICBlbHNlIGlmKCAoIG9yaWdpbi5pbmRleCA9PSAxIHx8IG9yaWdpbi5pbmRleCA9PSAyIHx8IG9yaWdpbi5pbmRleCA9PSAzICkgJiYgbmV4dEluZGV4LmluZGV4ID09IDQgKSB7XG4gICAgICAgICAgICAkaXNBbmltYXRlZEZpZnRoLmVxKDApLmFkZENsYXNzKCdhbmltYXRlZCB6b29tSW4nKS5jc3MoJ2FuaW1hdGlvbi1kZWxheScsICcuMXMnKTtcbiAgICAgICAgICAgICRpc0FuaW1hdGVkRmlmdGguZXEoMSkuYWRkQ2xhc3MoJ2FuaW1hdGVkIHpvb21JbicpLmNzcygnYW5pbWF0aW9uLWRlbGF5JywgJy41cycpO1xuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGVsc2UgaWYoICggb3JpZ2luLmluZGV4ID09IDEgfHwgb3JpZ2luLmluZGV4ID09IDIgfHwgb3JpZ2luLmluZGV4ID09IDMgfHwgb3JpZ2luLmluZGV4ID09IDQgKSAmJiBuZXh0SW5kZXguaW5kZXggPT0gNSApIHtcbiAgICAgICAgICAgICRpc0FuaW1hdGVkU2l4dGguZXEoMCkuYWRkQ2xhc3MoJ2FuaW1hdGVkIHpvb21JbicpLmNzcygnYW5pbWF0aW9uLWRlbGF5JywgJy4zcycpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbiQoJyNhcnJvd0FuaW0nKS5jbGljayhmdW5jdGlvbigpe1xuICAgICQuZm4uZnVsbHBhZ2UubW92ZVNlY3Rpb25Eb3duKCk7XG59KTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgJCgnYm9keScpLmZhZGVUbyggXCJmYXN0XCIsIDEgKTtcbiAgICBpZigkKCdib2R5JykuaGFzQ2xhc3MoXCJ0aW5nbGUtZW5hYmxlZFwiKSl7XG4gICAgICAgIGZ1bGxwYWdlX2FwaS5zZXRBbGxvd1Njcm9sbGluZyhmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZnVsbHBhZ2VfYXBpLnNldEFsbG93U2Nyb2xsaW5nKHRydWUpO1xuICAgIH1cbn0pO1xuXG5pZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihcInBhcnRuZXJzXCIpID4gLTEpIHtcbiAgICAkKCcjZnVsbHBhZ2UtcHJvamVjdHMnKS5mdWxscGFnZSh7XG4gICAgICAgIGxpY2Vuc2VLZXk6ICd4eHh4eHh4eC14eHh4eHh4eC14eHh4eHh4eC14eHh4eHh4eCcsXG4gICAgICAgIHZlcnRpY2FsQ2VudGVyZWQ6IGZhbHNlLFxuICAgICAgICBsb2NrQW5jaG9yczogdHJ1ZSxcbiAgICAgICAgYW5jaG9yczogWydGcmVlSG9tZVJpc2snLCAnSGF6YXJkSHViJywgJ1VuZGVyTkRBJywgJ1RydWVSZXZpZXdDYXNpbm8nXSxcbiAgICAgICAgbmF2aWdhdGlvbjogdHJ1ZSxcbiAgICAgICAgbmF2aWdhdGlvblRvb2x0aXBzOiBbJ0ZyZWVIb21lUmlzaycsICdIYXphcmRIdWInLCAnVW5kZXJOREEnLCAnVHJ1ZVJldmlld0Nhc2lubyddLFxuICAgICAgICBzaG93QWN0aXZlVG9vbHRpcDogdHJ1ZSxcbiAgICAgICAgbWVudTogJyNtZW51JyxcbiAgICAgICAgc2VjdGlvbnNDb2xvcjogWycjZmZmJywgICcjZjdmN2Y3JywgJyNmZmYnLCAnI2Y3ZjdmNyddLFxuICAgICAgICAvL2Rpc2FibGVkIGluIG1vYmlsZVxuICAgICAgICByZXNwb25zaXZlV2lkdGg6IDc2NyxcbiAgICAgICAgYWZ0ZXJSZXNwb25zaXZlOiBmdW5jdGlvbihpc1Jlc3BvbnNpdmUpe30sXG4gICAgICAgIGFmdGVyUmVuZGVyOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIG1vZGFsQmlnQ29udGVudCA9IG5ldyB0aW5nbGUubW9kYWwoe1xuICAgICAgICAgICAgICAgIG9uT3BlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGxwYWdlX2FwaS5zZXRBbGxvd1Njcm9sbGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVsbHBhZ2VfYXBpLnNldEFsbG93U2Nyb2xsaW5nKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGJ0bjEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtdGluZ2xlLW1vZGFsLTEnKTtcbiAgICAgICAgICAgIGlmKGJ0bjEpe1xuICAgICAgICAgICAgICAgIGJ0bjEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBtb2RhbEJpZ0NvbnRlbnQub3BlbigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBtb2RhbEJpZ0NvbnRlbnQuc2V0Q29udGVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGluZ2xlLWRlbW8tYmlnLTEnKS5pbm5lckhUTUwpO1xuXG4gICAgICAgICAgICB2YXIgbW9kYWxCaWdDb250ZW50MiA9IG5ldyB0aW5nbGUubW9kYWwoe1xuICAgICAgICAgICAgICAgIG9uT3BlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGxwYWdlX2FwaS5zZXRBbGxvd1Njcm9sbGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVsbHBhZ2VfYXBpLnNldEFsbG93U2Nyb2xsaW5nKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGJ0bjEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtdGluZ2xlLW1vZGFsLTInKTtcbiAgICAgICAgICAgIGlmKGJ0bjEpe1xuICAgICAgICAgICAgICAgIGJ0bjEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBtb2RhbEJpZ0NvbnRlbnQyLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW9kYWxCaWdDb250ZW50Mi5zZXRDb250ZW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW5nbGUtZGVtby1iaWctMicpLmlubmVySFRNTCk7XG5cbiAgICAgICAgICAgIC8vIHZhciBpO1xuICAgICAgICAgICAgLy8gcHJvamVjdHMgPSA1O1xuICAgICAgICAgICAgLy8gZm9yIChpID0gMTsgaSA8IHByb2plY3RzOyBpKyspIHsgXG4gICAgICAgICAgICAvLyAgICAgdmFyIGJ0biA9ICdidG4nK2lcbiAgICAgICAgICAgIC8vICAgICBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtdGluZ2xlLW1vZGFsLScraSk7XG4gICAgICAgICAgICAvLyAgICAgaWYoYnRuKXtcbiAgICAgICAgICAgIC8vICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIG1vZGFsQmlnQ29udGVudC5vcGVuKCk7XG4gICAgICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGluZ2xlLWRlbW8tYmlnLScraSkgIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gICAgICAgICBtb2RhbEJpZ0NvbnRlbnQuc2V0Q29udGVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGluZ2xlLWRlbW8tYmlnLScraSkuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW5nbGUtZGVtby1iaWctJytpKS5pbm5lckhUTUwpO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG5cbi8vIEJhcmJhLkRpc3BhdGNoZXIub24oJ25ld1BhZ2VSZWFkeScsIGZ1bmN0aW9uKGN1cnJlbnQsIHByZXYsIGNvbnRhaW5lcikge1xuLy8gICAgIGlmICggJCggJ2h0bWwnICkuaGFzQ2xhc3MoICdmcC1lbmFibGVkJyApICkge1xuLy8gICAgICAgICAkLmZuLmZ1bGxwYWdlLmRlc3Ryb3koJ2FsbCcpO1xuLy8gICAgIH1cbi8vXG4vL1xuLy8gfSk7XG4vL1xuLy8gJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4vLyAgICAgQmFyYmEuUGpheC5zdGFydCgpO1xuLy8gICAgIHZhciBGYWRlVHJhbnNpdGlvbiA9IEJhcmJhLkJhc2VUcmFuc2l0aW9uLmV4dGVuZCh7XG4vLyAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbigpIHtcbi8vICAgICAgICAgICAgIC8qKlxuLy8gICAgICAgICAgICAgICogVGhpcyBmdW5jdGlvbiBpcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCBhcyBzb29uIHRoZSBUcmFuc2l0aW9uIHN0YXJ0c1xuLy8gICAgICAgICAgICAgICogdGhpcy5uZXdDb250YWluZXJMb2FkaW5nIGlzIGEgUHJvbWlzZSBmb3IgdGhlIGxvYWRpbmcgb2YgdGhlIG5ldyBjb250YWluZXJcbi8vICAgICAgICAgICAgICAqIChCYXJiYS5qcyBhbHNvIGNvbWVzIHdpdGggYW4gaGFuZHkgUHJvbWlzZSBwb2x5ZmlsbCEpXG4vLyAgICAgICAgICAgICAgKi9cbi8vXG4vLyAgICAgICAgICAgICAvLyBBcyBzb29uIHRoZSBsb2FkaW5nIGlzIGZpbmlzaGVkIGFuZCB0aGUgb2xkIHBhZ2UgaXMgZmFkZWQgb3V0LCBsZXQncyBmYWRlIHRoZSBuZXcgcGFnZVxuLy8gICAgICAgICAgICAgUHJvbWlzZVxuLy8gICAgICAgICAgICAgICAgIC5hbGwoW3RoaXMubmV3Q29udGFpbmVyTG9hZGluZywgdGhpcy5mYWRlT3V0KCldKVxuLy8gICAgICAgICAgICAgICAgIC50aGVuKHRoaXMuZmFkZUluLmJpbmQodGhpcykpO1xuLy8gICAgICAgICB9LFxuLy9cbi8vICAgICAgICAgZmFkZU91dDogZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgICAgICAvKipcbi8vICAgICAgICAgICAgICAqIHRoaXMub2xkQ29udGFpbmVyIGlzIHRoZSBIVE1MRWxlbWVudCBvZiB0aGUgb2xkIENvbnRhaW5lclxuLy8gICAgICAgICAgICAgICovXG4vL1xuLy8gICAgICAgICAgICAgcmV0dXJuICQodGhpcy5vbGRDb250YWluZXIpLmFuaW1hdGUoeyBvcGFjaXR5OiAwIH0pLnByb21pc2UoKTtcbi8vICAgICAgICAgfSxcbi8vXG4vLyAgICAgICAgIGZhZGVJbjogZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgICAgICAvKipcbi8vICAgICAgICAgICAgICAqIHRoaXMubmV3Q29udGFpbmVyIGlzIHRoZSBIVE1MRWxlbWVudCBvZiB0aGUgbmV3IENvbnRhaW5lclxuLy8gICAgICAgICAgICAgICogQXQgdGhpcyBzdGFnZSBuZXdDb250YWluZXIgaXMgb24gdGhlIERPTSAoaW5zaWRlIG91ciAjYmFyYmEtY29udGFpbmVyIGFuZCB3aXRoIHZpc2liaWxpdHk6IGhpZGRlbilcbi8vICAgICAgICAgICAgICAqIFBsZWFzZSBub3RlLCBuZXdDb250YWluZXIgaXMgYXZhaWxhYmxlIGp1c3QgYWZ0ZXIgbmV3Q29udGFpbmVyTG9hZGluZyBpcyByZXNvbHZlZCFcbi8vICAgICAgICAgICAgICAqL1xuLy9cbi8vICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4vLyAgICAgICAgICAgICB2YXIgJGVsID0gJCh0aGlzLm5ld0NvbnRhaW5lcik7XG4vL1xuLy8gICAgICAgICAgICAgJCh0aGlzLm9sZENvbnRhaW5lcikuaGlkZSgpO1xuLy9cbi8vICAgICAgICAgICAgICRlbC5jc3Moe3Zpc2liaWxpdHkgOiAndmlzaWJsZScsXG4vLyAgICAgICAgICAgICAgICAgb3BhY2l0eSA6IDBcbi8vICAgICAgICAgICAgIH0pO1xuLy9cbi8vICAgICAgICAgICAgICRlbC5hbmltYXRlKHsgb3BhY2l0eTogMSB9LCA0MDAsIGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICAgICAgICAgIC8qKlxuLy8gICAgICAgICAgICAgICAgICAqIERvIG5vdCBmb3JnZXQgdG8gY2FsbCAuZG9uZSgpIGFzIHNvb24geW91ciB0cmFuc2l0aW9uIGlzIGZpbmlzaGVkIVxuLy8gICAgICAgICAgICAgICAgICAqIC5kb25lKCkgd2lsbCBhdXRvbWF0aWNhbGx5IHJlbW92ZSBmcm9tIHRoZSBET00gdGhlIG9sZCBDb250YWluZXJcbi8vICAgICAgICAgICAgICAgICAgKi9cbi8vXG4vLyAgICAgICAgICAgICAgICAgX3RoaXMuZG9uZSgpO1xuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9KTtcbi8vXG4vLyAgICAgLyoqXG4vLyAgICAgICogTmV4dCBzdGVwLCB5b3UgaGF2ZSB0byB0ZWxsIEJhcmJhIHRvIHVzZSB0aGUgbmV3IFRyYW5zaXRpb25cbi8vICAgICAgKi9cbi8vXG4vLyAgICAgQmFyYmEuUGpheC5nZXRUcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgIC8qKlxuLy8gICAgICAgICAgKiBIZXJlIHlvdSBjYW4gdXNlIHlvdXIgb3duIGxvZ2ljIVxuLy8gICAgICAgICAgKiBGb3IgZXhhbXBsZSB5b3UgY2FuIHVzZSBkaWZmZXJlbnQgVHJhbnNpdGlvbiBiYXNlZCBvbiB0aGUgY3VycmVudCBwYWdlIG9yIGxpbmsuLi5cbi8vICAgICAgICAgICovXG4vL1xuLy8gICAgICAgICByZXR1cm4gRmFkZVRyYW5zaXRpb247XG4vLyAgICAgfTtcbi8vXG4vLyB9KTtcbi8vXG4vL1xuXG5mdW5jdGlvbiB2YWxpZEVtYWlsKGVtYWlsKSB7IC8vIHNlZTpcbiAgICB2YXIgcmUgPSAvXihbXFx3LV0rKD86XFwuW1xcdy1dKykqKUAoKD86W1xcdy1dK1xcLikqXFx3W1xcdy1dezAsNjZ9KVxcLihbYS16XXsyLDZ9KD86XFwuW2Etel17Mn0pPykkL2k7XG4gICAgcmV0dXJuIHJlLnRlc3QoZW1haWwpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUh1bWFuKGhvbmV5cG90KSB7XG4gICAgaWYgKGhvbmV5cG90KSB7ICAvL2lmIGhpZGRlbiBmb3JtIGZpbGxlZCB1cFxuICAgICAgICBjb25zb2xlLmxvZyhcIlJvYm90IERldGVjdGVkIVwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJXZWxjb21lIEh1bWFuIVwiKTtcbiAgICB9XG59XG5cbi8vIGdldCBhbGwgZGF0YSBpbiBmb3JtIGFuZCByZXR1cm4gb2JqZWN0XG5mdW5jdGlvbiBnZXRGb3JtRGF0YSgpIHtcbiAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2Zvcm1cIik7XG4gICAgdmFyIGVsZW1lbnRzID0gZm9ybS5lbGVtZW50czsgLy8gYWxsIGZvcm0gZWxlbWVudHNcbiAgICB2YXIgZmllbGRzID0gT2JqZWN0LmtleXMoZWxlbWVudHMpLmZpbHRlcihmdW5jdGlvbihrKSB7XG4gICAgICAgIC8vIHRoZSBmaWx0ZXJpbmcgbG9naWMgaXMgc2ltcGxlLCBvbmx5IGtlZXAgZmllbGRzIHRoYXQgYXJlIG5vdCB0aGUgaG9uZXlwb3RcbiAgICAgICAgcmV0dXJuIChlbGVtZW50c1trXS5uYW1lICE9PSBcImhvbmV5cG90XCIpO1xuICAgIH0pLm1hcChmdW5jdGlvbihrKSB7XG4gICAgICAgIGlmKGVsZW1lbnRzW2tdLm5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzW2tdLm5hbWU7XG4gICAgICAgICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIEVkZ2UncyBodG1sIGNvbGxlY3Rpb25cbiAgICAgICAgfWVsc2UgaWYoZWxlbWVudHNba10ubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudHNba10uaXRlbSgwKS5uYW1lO1xuICAgICAgICB9XG4gICAgfSkuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0sIHBvcywgc2VsZikge1xuICAgICAgICByZXR1cm4gc2VsZi5pbmRleE9mKGl0ZW0pID09IHBvcyAmJiBpdGVtO1xuICAgIH0pO1xuICAgIHZhciBkYXRhID0ge307XG4gICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24oayl7XG4gICAgICAgIGRhdGFba10gPSBlbGVtZW50c1trXS52YWx1ZTtcbiAgICAgICAgdmFyIHN0ciA9IFwiXCI7IC8vIGRlY2xhcmUgZW1wdHkgc3RyaW5nIG91dHNpZGUgb2YgbG9vcCB0byBhbGxvd1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGl0IHRvIGJlIGFwcGVuZGVkIHRvIGZvciBlYWNoIGl0ZW0gaW4gdGhlIGxvb3BcbiAgICAgICAgaWYoZWxlbWVudHNba10udHlwZSA9PT0gXCJjaGVja2JveFwiKXsgLy8gc3BlY2lhbCBjYXNlIGZvciBFZGdlJ3MgaHRtbCBjb2xsZWN0aW9uXG4gICAgICAgICAgICBzdHIgPSBzdHIgKyBlbGVtZW50c1trXS5jaGVja2VkICsgXCIsIFwiOyAvLyB0YWtlIHRoZSBzdHJpbmcgYW5kIGFwcGVuZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBjdXJyZW50IGNoZWNrZWQgdmFsdWUgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZW5kIG9mIGl0LCBhbG9uZyB3aXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBjb21tYSBhbmQgYSBzcGFjZVxuICAgICAgICAgICAgZGF0YVtrXSA9IHN0ci5zbGljZSgwLCAtMik7IC8vIHJlbW92ZSB0aGUgbGFzdCBjb21tYSBhbmQgc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tIHRoZSAgc3RyaW5nIHRvIG1ha2UgdGhlIG91dHB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXR0aWVyIGluIHRoZSBzcHJlYWRzaGVldFxuICAgICAgICB9ZWxzZSBpZihlbGVtZW50c1trXS5sZW5ndGgpe1xuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzW2tdLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZihlbGVtZW50c1trXS5pdGVtKGkpLmNoZWNrZWQpe1xuICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIgKyBlbGVtZW50c1trXS5pdGVtKGkpLnZhbHVlICsgXCIsIFwiOyAvLyBzYW1lIGFzIGFib3ZlXG4gICAgICAgICAgICAgICAgICAgIGRhdGFba10gPSBzdHIuc2xpY2UoMCwgLTIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gYWRkIGZvcm0tc3BlY2lmaWMgdmFsdWVzIGludG8gdGhlIGRhdGFcbiAgICBkYXRhLmZvcm1EYXRhTmFtZU9yZGVyID0gSlNPTi5zdHJpbmdpZnkoZmllbGRzKTtcbiAgICBkYXRhLmZvcm1Hb29nbGVTaGVldE5hbWUgPSBmb3JtLmRhdGFzZXQuc2hlZXQgfHwgXCJyZXNwb25zZXNcIjsgLy8gZGVmYXVsdCBzaGVldCBuYW1lXG4gICAgZGF0YS5mb3JtR29vZ2xlU2VuZEVtYWlsID0gZm9ybS5kYXRhc2V0LmVtYWlsIHx8IFwiXCI7IC8vIG5vIGVtYWlsIGJ5IGRlZmF1bHRcblxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JtU3VibWl0KGV2ZW50KSB7ICAvLyBoYW5kbGVzIGZvcm0gc3VibWl0IHdpdGh0b3V0IGFueSBqcXVlcnlcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAgICAgICAgICAgLy8gd2UgYXJlIHN1Ym1pdHRpbmcgdmlhIHhociBiZWxvd1xuICAgIHZhciBkYXRhID0gZ2V0Rm9ybURhdGEoKTsgICAgICAgICAvLyBnZXQgdGhlIHZhbHVlcyBzdWJtaXR0ZWQgaW4gdGhlIGZvcm1cblxuICAgIC8qIE9QVElPTjogUmVtb3ZlIHRoaXMgY29tbWVudCB0byBlbmFibGUgU1BBTSBwcmV2ZW50aW9uLCBzZWUgUkVBRE1FLm1kXG4gICAgIGlmICh2YWxpZGF0ZUh1bWFuKGRhdGEuaG9uZXlwb3QpKSB7ICAvL2lmIGZvcm0gaXMgZmlsbGVkLCBmb3JtIHdpbGwgbm90IGJlIHN1Ym1pdHRlZFxuICAgICByZXR1cm4gZmFsc2U7XG4gICAgIH1cbiAgICAgKi9cblxuICAgIGlmKCBkYXRhLmVtYWlsICYmICF2YWxpZEVtYWlsKGRhdGEuZW1haWwpICkgeyAgIC8vIGlmIGVtYWlsIGlzIG5vdCB2YWxpZCBzaG93IGVycm9yXG4gICAgICAgIHZhciBpbnZhbGlkRW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVtYWlsLWludmFsaWRcIik7XG4gICAgICAgIGlmIChpbnZhbGlkRW1haWwpIHtcbiAgICAgICAgICAgIGludmFsaWRFbWFpbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHVybCA9IGV2ZW50LnRhcmdldC5hY3Rpb247ICAvL1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKCdQT1NUJywgdXJsKTtcbiAgICAgICAgLy8geGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpO1xuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyggeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQgKVxuICAgICAgICAgICAgY29uc29sZS5sb2coeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdmb3JtXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjsgLy8gaGlkZSBmb3JtXG4gICAgICAgICAgICB2YXIgdGhhbmtZb3VNZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aGFua3lvdV9tZXNzYWdlXCIpO1xuICAgICAgICAgICAgaWYgKHRoYW5rWW91TWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIHRoYW5rWW91TWVzc2FnZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9O1xuICAgICAgICAvLyB1cmwgZW5jb2RlIGZvcm0gZGF0YSBmb3Igc2VuZGluZyBhcyBwb3N0IGRhdGFcbiAgICAgICAgdmFyIGVuY29kZWQgPSBPYmplY3Qua2V5cyhkYXRhKS5tYXAoZnVuY3Rpb24oaykge1xuICAgICAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChrKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba10pXG4gICAgICAgIH0pLmpvaW4oJyYnKVxuICAgICAgICB4aHIuc2VuZChlbmNvZGVkKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsb2FkZWQoKSB7XG4gICAgY29uc29sZS5sb2coXCJDb250YWN0IGZvcm0gc3VibWlzc2lvbiBoYW5kbGVyIGxvYWRlZCBzdWNjZXNzZnVsbHkuXCIpO1xuICAgIC8vIGJpbmQgdG8gdGhlIHN1Ym1pdCBldmVudCBvZiBvdXIgZm9ybVxuICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZm9ybVwiKTtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRm9ybVN1Ym1pdCwgZmFsc2UpO1xufTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGxvYWRlZCwgZmFsc2UpO1xuXG5pZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihcImluZGV4XCIpID4gLTEpIHtcbiAgICAvLyBnZXQgYWxsIGRhdGEgaW4gZm9ybSBhbmQgcmV0dXJuIG9iamVjdFxuICAgIGZ1bmN0aW9uIGdldEZvcm1EYXRhMigpIHtcbiAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdmb3JtMlwiKTtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gZm9ybS5lbGVtZW50czsgLy8gYWxsIGZvcm0gZWxlbWVudHNcbiAgICAgICAgdmFyIGZpZWxkcyA9IE9iamVjdC5rZXlzKGVsZW1lbnRzKS5tYXAoZnVuY3Rpb24oaykge1xuICAgICAgICAgICAgaWYoZWxlbWVudHNba10ubmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzW2tdLm5hbWU7XG4gICAgICAgICAgICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciBFZGdlJ3MgaHRtbCBjb2xsZWN0aW9uXG4gICAgICAgICAgICB9ZWxzZSBpZihlbGVtZW50c1trXS5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudHNba10uaXRlbSgwKS5uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24oaXRlbSwgcG9zLCBzZWxmKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5pbmRleE9mKGl0ZW0pID09IHBvcyAmJiBpdGVtO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24oayl7XG4gICAgICAgICAgICBkYXRhW2tdID0gZWxlbWVudHNba10udmFsdWU7XG4gICAgICAgICAgICB2YXIgc3RyID0gXCJcIjsgLy8gZGVjbGFyZSBlbXB0eSBzdHJpbmcgb3V0c2lkZSBvZiBsb29wIHRvIGFsbG93XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCB0byBiZSBhcHBlbmRlZCB0byBmb3IgZWFjaCBpdGVtIGluIHRoZSBsb29wXG4gICAgICAgICAgICBpZihlbGVtZW50c1trXS50eXBlID09PSBcImNoZWNrYm94XCIpeyAvLyBzcGVjaWFsIGNhc2UgZm9yIEVkZ2UncyBodG1sIGNvbGxlY3Rpb25cbiAgICAgICAgICAgICAgICBzdHIgPSBzdHIgKyBlbGVtZW50c1trXS5jaGVja2VkICsgXCIsIFwiOyAvLyB0YWtlIHRoZSBzdHJpbmcgYW5kIGFwcGVuZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgY3VycmVudCBjaGVja2VkIHZhbHVlIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBlbmQgb2YgaXQsIGFsb25nIHdpdGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBjb21tYSBhbmQgYSBzcGFjZVxuICAgICAgICAgICAgICAgIGRhdGFba10gPSBzdHIuc2xpY2UoMCwgLTIpOyAvLyByZW1vdmUgdGhlIGxhc3QgY29tbWEgYW5kIHNwYWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb20gdGhlICBzdHJpbmcgdG8gbWFrZSB0aGUgb3V0cHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXR0aWVyIGluIHRoZSBzcHJlYWRzaGVldFxuICAgICAgICAgICAgfWVsc2UgaWYoZWxlbWVudHNba10ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZWxlbWVudHNba10ubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBpZihlbGVtZW50c1trXS5pdGVtKGkpLmNoZWNrZWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyICsgZWxlbWVudHNba10uaXRlbShpKS52YWx1ZSArIFwiLCBcIjsgLy8gc2FtZSBhcyBhYm92ZVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtrXSA9IHN0ci5zbGljZSgwLCAtMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGFkZCBmb3JtLXNwZWNpZmljIHZhbHVlcyBpbnRvIHRoZSBkYXRhXG4gICAgICAgIGRhdGEuZm9ybURhdGFOYW1lT3JkZXIgPSBKU09OLnN0cmluZ2lmeShmaWVsZHMpO1xuICAgICAgICBkYXRhLmZvcm1Hb29nbGVTaGVldE5hbWUgPSBmb3JtLmRhdGFzZXQuc2hlZXQgfHwgXCJyZXNwb25zZXNcIjsgLy8gZGVmYXVsdCBzaGVldCBuYW1lXG4gICAgICAgIGRhdGEuZm9ybUdvb2dsZVNlbmRFbWFpbCA9IGZvcm0uZGF0YXNldC5lbWFpbCB8fCBcIlwiOyAvLyBubyBlbWFpbCBieSBkZWZhdWx0XG5cbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUZvcm1TdWJtaXQyKGV2ZW50KSB7ICAvLyBoYW5kbGVzIGZvcm0gc3VibWl0IHdpdGh0b3V0IGFueSBqcXVlcnlcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgICAgICAgICAgIC8vIHdlIGFyZSBzdWJtaXR0aW5nIHZpYSB4aHIgYmVsb3dcbiAgICAgICAgdmFyIGRhdGEgPSBnZXRGb3JtRGF0YTIoKTsgICAgICAgICAvLyBnZXQgdGhlIHZhbHVlcyBzdWJtaXR0ZWQgaW4gdGhlIGZvcm1cblxuICAgICAgICAvKiBPUFRJT046IFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gZW5hYmxlIFNQQU0gcHJldmVudGlvbiwgc2VlIFJFQURNRS5tZFxuICAgICAgICBpZiAodmFsaWRhdGVIdW1hbihkYXRhLmhvbmV5cG90KSkgeyAgLy9pZiBmb3JtIGlzIGZpbGxlZCwgZm9ybSB3aWxsIG5vdCBiZSBzdWJtaXR0ZWRcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgICovXG5cbiAgICAgICAgaWYoICF2YWxpZEVtYWlsKGRhdGEuZW1haWwpICkgeyAgIC8vIGlmIGVtYWlsIGlzIG5vdCB2YWxpZCBzaG93IGVycm9yXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwtaW52YWxpZDInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBldmVudC50YXJnZXQuYWN0aW9uOyAgLy9cbiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgdXJsKTtcbiAgICAgICAgICAgIC8vIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKTtcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQgKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZm9ybTInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBoaWRlIGZvcm1cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhhbmt5b3VfbWVzc2FnZTInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gdXJsIGVuY29kZSBmb3JtIGRhdGEgZm9yIHNlbmRpbmcgYXMgcG9zdCBkYXRhXG4gICAgICAgICAgICB2YXIgZW5jb2RlZCA9IE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbihrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChrKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW2tdKVxuICAgICAgICAgICAgfSkuam9pbignJicpXG4gICAgICAgICAgICB4aHIuc2VuZChlbmNvZGVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBsb2FkZWQyKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnY29udGFjdCBmb3JtIHN1Ym1pc3Npb24gaGFuZGxlciBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgIC8vIGJpbmQgdG8gdGhlIHN1Ym1pdCBldmVudCBvZiBvdXIgZm9ybVxuICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZm9ybTInKTtcbiAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUZvcm1TdWJtaXQyLCBmYWxzZSk7XG4gICAgfTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbG9hZGVkMiwgZmFsc2UpO1xufTsiXX0="}